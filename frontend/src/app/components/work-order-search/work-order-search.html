<div class="work-order-search-container">
  <div class="page-header">
    <h1>Work Order Search</h1>
    <p>Search for work orders using the Zcatsv2_Wo_Get_List RFC</p>
  </div>

  <div class="search-form" *ngIf="!isLoading">
    <!-- Search Criteria -->
    <div class="form-section">
      <h3>Search Criteria</h3>
      <div class="form-row">
        <div class="form-column">
          <label for="vin">VIN Number:</label>
          <input 
            type="text" 
            id="vin" 
            [(ngModel)]="searchCriteria.vin" 
            placeholder="Enter VIN number"
            class="form-input">
        </div>
        
        <div class="form-column">
          <label for="dealer-code">Dealer Code:</label>
          <input 
            type="text" 
            id="dealer-code" 
            [(ngModel)]="searchCriteria.dealer_code" 
            placeholder="Enter dealer code"
            class="form-input">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-column">
          <label for="wo-no">Work Order No:</label>
          <input 
            type="text" 
            id="wo-no" 
            [(ngModel)]="searchCriteria.wo_no" 
            placeholder="Enter work order number"
            class="form-input">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-column">
          <label for="date-from">Date From:</label>
          <input 
            type="date" 
            id="date-from" 
            [(ngModel)]="searchCriteria.date_from" 
            class="form-input">
        </div>
        
        <div class="form-column">
          <label for="date-to">Date To:</label>
          <input 
            type="date" 
            id="date-to" 
            [(ngModel)]="searchCriteria.date_to" 
            class="form-input">
        </div>
      </div>
    </div>

    <!-- Strategy Options -->
    <div class="form-section">
      <h3>Strategy Options</h3>
      <div class="checkbox-group">
        <div class="checkbox-item">
          <input type="checkbox" id="temsa-global" [(ngModel)]="searchCriteria.temsa_global">
          <label for="temsa-global">Temsa Global</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="temsa-global-gwk" [(ngModel)]="searchCriteria.temsa_global_gwk">
          <label for="temsa-global-gwk">Temsa Global GW&TK</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="germany" [(ngModel)]="searchCriteria.germany">
          <label for="germany">Germany</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="france" [(ngModel)]="searchCriteria.france">
          <label for="france">France</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="north-america" [(ngModel)]="searchCriteria.north_america">
          <label for="north-america">North America</label>
        </div>
      </div>
    </div>

    <!-- Search Buttons -->
    <div class="form-actions">
      <button 
        type="button" 
        (click)="searchWorkOrders()" 
        [disabled]="isLoading"
        class="btn btn-primary">
        Search Work Orders
      </button>
      <button 
        type="button" 
        (click)="clearSearch()" 
        class="btn btn-secondary">
        Clear
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <p>Loading...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">
    <p class="error-message">{{error}}</p>
  </div>

  <!-- Search Results -->
  <div *ngIf="hasSearched && !isLoading && !error" class="search-results">
    <div class="results-header">
      <h2>Search Results ({{workOrders.length}} work orders found)</h2>
    </div>
    
    <div *ngIf="workOrders.length === 0" class="no-results">
      <p>No work orders found matching your search criteria.</p>
    </div>

    <div *ngIf="workOrders.length > 0" class="results-table">
      <table>
        <thead>
          <tr>
            <th>Work Order No.</th>
            <th>Creation Date</th>
            <th>VIN</th>
            <th>Dealer Code</th>
            <th>WO Type</th>
            <th>WO Status</th>
            <th>FG Status</th>
            <th>RA Country</th>
            <th>Approval Status</th>
            <th>Created By</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let wo of workOrders" class="result-row">
            <td class="wo-number">{{wo.wono}}</td>
            <td>{{wo.credate}}</td>
            <td class="vin">{{wo.vin}}</td>
            <td>{{wo.dealer_code}}</td>
            <td>{{wo.wo_type_text}} ({{wo.wo_type}})</td>
            <td>
              <span [class]="'status-badge status-' + wo.wo_status">
                {{wo.wo_status_text}}
              </span>
            </td>
            <td>{{wo.fg_status_text}}</td>
            <td>{{wo.ra_country_text}}</td>
            <td>{{wo.wo_onay_text}}</td>
            <td>{{wo.creuser}}</td>
            <td>
              <button 
                *ngIf="wo.enability_button" 
                class="btn btn-action">
                Action
              </button>
              <span *ngIf="!wo.enability_button" class="no-action">-</span>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Reject Notes -->
      <div *ngFor="let wo of workOrders" class="reject-notes">
        <div *ngIf="wo.reject_note && wo.reject_note.trim().length > 0" class="reject-note-item">
          <strong>Reject Note for {{wo.wono}}:</strong>
          <p>{{wo.reject_note}}</p>
        </div>
      </div>
    </div>
  </div>
</div>